{% extends '/base.twig' %}
{% block nav %}{% endblock %}
{% block footer %}{% endblock %}

{% block title %}Redirection{% endblock %}

{% block head %}
    <link rel="stylesheet" href="{{ asset('css/redirect.css') }}">
{% endblock %}

{% block main %}
<div class="container">
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
            <div id="master-wrap">
                <div id="logo-box" class="text-center">
                    <div class="animated fast fadeInUp">
                        <img class="icon" src='{{ asset('img/wait.gif') }}'/>
                        <h1>Veuillez patienter</h1>
                    </div>
                    <div class="notice animated fadeInUp">
                        <p id="timer"></p>
                        <p class="redirect-message">
                            Si vous n'êtes pas redirigé automatiquement,<br>
                            veuillez cliquer sur le bouton ci-dessous.
                        </p>
                        <a class="btn animation" href="{{ target }}">
                            Accéder à la page
                        </a>
                    </div>
                    <div class="footer animated slow fadeInUp">
                        <p class="copyright">
                            &copy; JM projets
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block script %}
    <script type="text/javascript">
        var count = 5; // Timer 
        function countDown() {
    var timer = document.getElementById("timer"); // Timer ID 
    if (count > 0) {
        count--; 
        timer.innerHTML = "Vous serez redirigé·e dans <strong>" + count + "</strong> secondes."; // Timer Message
        setTimeout("countDown()", 1000);
    } else {
        window.location = "{{ target }}";
    }
}
countDown();

// createPageTransition();
setInterval(createPageTransition, 3000);
function createPageTransition() {
    const el = document.createElement('div');
    el.className = 'page-transition';
    const overlay = document.createElement('div');
    overlay.className = 'page-transition__overlay';
    el.appendChild(overlay);
    document.body.appendChild(el);
    setTimeout(() => {
        el.className = 'page-transition page-transition--in';
    }, 100);
}

    </script>
{% endblock %}
